version: '3'
services:
  redis-cluster:
    image: {{ redis_image }}
    container_name: redis-node01
    volumes:
      - {{ data_dir }}/redis.conf:/data/redis.conf
    # redis.conf设置的数据目录为/data/redis
      - {{ data_dir }}/data/:/data/redis/
    network_mode: "host" 
    restart: always
    command: redis-server /data/redis.conf

# docker exec -it redis-node01 /bin/sh -c 'redis-cli --cluster create 192.168.160.62:6379 192.168.160.64:6379 192.168.160.98:6379 192.168.160.99:6379 192.168.160.100:6379 192.168.160.101:6379 --cluster-replicas 1' 

# docker exec -it redis-node01 /bin/sh -c 'redis-cli cluster info'
