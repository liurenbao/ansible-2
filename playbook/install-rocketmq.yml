---
- name: install jdk
  gather_facts: false
  hosts:
    - rocketmq-namesrv
    - rocketmq-master
    - rocketmq-slave
  roles:
    - change-sysconf
    - install-java
  tasks:
    - name: create rocketmq user
      user:
        name: "{{ mq_user }}"
        password: "{{ mq_user_pass }}"
        state: present

- name: install-rocketmq-namesrv
  gather_facts: false
  hosts: rocketmq-namesrv
  roles:
    - rocketmq-namesrv

- name: install-rocketmq-master
  gather_facts: false
  hosts: rocketmq-master
  roles:
    - rocketmq-master

- name: install rocketmq slave
  gather_facts: false
  hosts: rocketmq-slave
  roles:
    - rocketmq-slave

- name: start rocketmq-console
  gather_facts: false
  hosts: rocketmq-console
  roles:
    - rocketmq-console